var dataList,len,control,timer,root=window.player,audio=root.audioManager;function getData(t){$.ajax({type:"GET",url:t,success:function(t){len=(dataList=t).length,control=new root.controlIndex(len),root.render(t[0]),audio.getAudio(t[0].audio),bindEvent()},error:function(t){console.log(t)}})}function bindEvent(){$("body").on("play:change",function(t,a){audio.getAudio(dataList[a].audio),root.render(dataList[a]),"play"==audio.status&&(rotated(0),audio.play()),$(".img-box").attr("data-deg",0),$(".img-box").css({transform:"rotateZ(0deg)",transition:"none"})}),$(".prev").on("click",function(){var t=control.prev();$("body").trigger("play:change",t)}),$(".next").on("click",function(){var t=control.next();$("body").trigger("play:change",t)}),$(".play").on("click",function(){if("pause"==audio.status){var t=$(".img-box").attr("data-deg");console.log(t),rotated(t),audio.play()}else clearInterval(timer),audio.pause();$(".play").toggleClass("playing")})}function rotated(t){clearInterval(timer),t=+t,timer=setInterval(function(){t+=2,$(".img-box").attr("data-deg",t),$(".img-box").css({transform:"rotateZ("+t+"deg)",transition:"all 1s linear"})},200)}getData("../mock/data.json");